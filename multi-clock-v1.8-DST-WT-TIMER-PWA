<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>multi-clock-v1.8-DST-WT-TIMER-PWA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#0055aa">
<link rel="manifest" href="manifest.json">
<link rel="icon" href="icon-192.png">
<style>
    :root {
        --bg: #eef6ff;
        --text-main: #111827;
        --card-bg: #ffffff;
        --card-shadow: rgba(0,0,0,0.15);
        --accent: #0055aa;
        --subtle: #4b5563;
    }
    body.dark {
        --bg: #060b11;
        --text-main: #e5e7eb;
        --card-bg: #111827;
        --card-shadow: rgba(0,0,0,0.7);
        --accent: #63b3ff;
        --subtle: #9ca3af;
    }

    body {
        font-family: Arial, sans-serif;
        background: var(--bg);
        color: var(--text-main);
        margin: 0;
        padding: 20px;
        text-align: center;
        transition: background 0.3s, color 0.3s;
    }

    h1 {
        color: var(--accent);
        margin-bottom: 4px;
    }

    .hint {
        font-size: 0.9rem;
        color: var(--subtle);
        margin-top: 2px;
        margin-bottom: 10px;
    }

    #topBar {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 8px;
        flex-wrap: wrap;
    }

    .top-button {
        padding: 6px 12px;
        font-size: 0.9rem;
        border-radius: 999px;
        border: 1px solid #cbd5f5;
        background: #f9fafb;
        cursor: pointer;
    }
    body.dark .top-button {
        border-color: #374151;
        background: #1f2933;
        color: var(--text-main);
    }
    .top-button:hover {
        background: #e5e7eb;
    }
    body.dark .top-button:hover {
        background: #374151;
    }

    .section-label {
        margin-top: 26px;
        margin-bottom: 6px;
        font-size: 0.95rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--subtle);
    }

    /* Grid layout optimized for mobile */
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 20px;
        margin-top: 10px;
        margin-bottom: 10px;
    }

    /* Cards */
    .card {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 4px 12px var(--card-shadow);
        transition: background 0.3s, box-shadow 0.3s, transform 0.1s;
    }
    .card:hover {
        transform: translateY(-2px);
    }

    .nodst { background: linear-gradient(135deg, #fff7df, #fffbf0); }
    body.dark .nodst { background: linear-gradient(135deg, #3b2f14, #45351a); }

    .world { background: linear-gradient(135deg, #eaffea, #f7fff7); }
    body.dark .world { background: linear-gradient(135deg, #103020, #163828); }

    .timer-card { background: linear-gradient(135deg, #ffeefe, #fff7ff); }
    body.dark .timer-card { background: linear-gradient(135deg, #361937, #421f43); }

    .zone {
        font-size: 1.2rem;
        margin-bottom: 6px;
        font-weight: bold;
    }
    .clock {
        font-size: 2rem;
        color: var(--accent);
        font-weight: bold;
        margin-bottom: 4px;
    }
    .date {
        font-size: 0.95rem;
        color: var(--subtle);
        margin-bottom: 2px;
    }
    .sun {
        font-size: 0.85rem;
        color: var(--subtle);
        margin-top: 2px;
    }

    /* World dropdown */
    select {
        padding: 8px;
        font-size: 0.95rem;
        margin-top: 8px;
        width: 90%;
        border-radius: 8px;
        border: 1px solid #cbd5f5;
    }
    body.dark select {
        background: #111827;
        border-color: #374151;
        color: var(--text-main);
    }

    footer {
        margin-top: 30px;
        font-size: 0.95rem;
        color: var(--subtle);
        padding: 10px;
    }
    .version {
        display: block;
        font-size: 0.85rem;
        margin-top: 2px;
        opacity: 0.85;
    }

    /* Stopwatch + Timer */
    .section-title {
        font-weight: bold;
        margin-top: 5px;
        margin-bottom: 6px;
    }
    .sw-display, .t-display {
        font-size: 1.6rem;
        font-weight: bold;
        margin: 4px 0 8px 0;
        color: #003f7f;
    }
    body.dark .sw-display,
    body.dark .t-display {
        color: #9ed0ff;
    }
    .btn-row {
        margin-bottom: 8px;
    }
    button {
        padding: 6px 10px;
        margin: 2px;
        font-size: 0.9rem;
        cursor: pointer;
        border-radius: 6px;
        border: 1px solid #cbd5f5;
        background: #f9fafb;
    }
    body.dark button {
        border-color: #374151;
        background: #1f2933;
        color: var(--text-main);
    }
    button:hover {
        background: #e5e7eb;
    }
    body.dark button:hover {
        background: #374151;
    }

    .timer-inputs input {
        width: 3.2em;
        padding: 4px;
        margin: 0 3px;
        text-align: center;
        border-radius: 6px;
        border: 1px solid #cbd5f5;
    }
    body.dark .timer-inputs input {
        background: #111827;
        border-color: #374151;
        color: var(--text-main);
    }

    .lap-list {
        list-style: none;
        padding-left: 0;
        text-align: left;
        max-height: 120px;
        overflow-y: auto;
        margin-top: 6px;
        border-top: 1px solid #e5e7eb;
        font-size: 0.85rem;
    }
    body.dark .lap-list {
        border-top-color: #374151;
    }
    .lap-list li {
        padding: 2px 0;
    }
</style>
</head>
<body>

<h1>multi-clock-v1.8-DST-WT-TIMER-PWA</h1>
<p class="hint">
    Tip: To install this app, use your browser menu and choose ‚ÄúAdd to Home Screen‚Äù or ‚ÄúInstall app‚Äù.
</p>

<div id="topBar">
    <button id="installBtn" class="top-button" style="display:none;">‚¨á Install App</button>
    <button id="themeToggle" class="top-button">üåô Dark Mode</button>
</div>

<div class="section-label">‚Äî CANADA TIMEZONES ‚Äî</div>

<div class="grid">
    <div class="card">
        <div class="zone">Pacific Time (PT)</div>
        <div id="pt" class="clock"></div>
        <div id="ptd" class="date"></div>
        <div id="ptSun" class="sun"></div>
    </div>
    <div class="card">
        <div class="zone">Mountain Time (MT)</div>
        <div id="mt" class="clock"></div>
        <div id="mtd" class="date"></div>
        <div id="mtSun" class="sun"></div>
    </div>
    <div class="card">
        <div class="zone">Central Time (CT)</div>
        <div id="ct" class="clock"></div>
        <div id="ctd" class="date"></div>
        <div id="ctSun" class="sun"></div>
    </div>
    <div class="card">
        <div class="zone">Eastern Time (ET)</div>
        <div id="et" class="clock"></div>
        <div id="etd" class="date"></div>
        <div id="etSun" class="sun"></div>
    </div>
    <div class="card">
        <div class="zone">Atlantic Time (AT)</div>
        <div id="at" class="clock"></div>
        <div id="atd" class="date"></div>
        <div id="atSun" class="sun"></div>
    </div>
    <div class="card">
        <div class="zone">Newfoundland Time (NT)</div>
        <div id="nt" class="clock"></div>
        <div id="ntd" class="date"></div>
        <div id="ntSun" class="sun"></div>
    </div>
</div>

<div class="section-label">‚Äî NO-DST REGIONS ‚Äî</div>

<div class="grid">
    <div class="card nodst">
        <div class="zone">Saskatchewan (No DST)</div>
        <div id="sk" class="clock"></div>
        <div id="skd" class="date"></div>
        <div id="skSun" class="sun"></div>
    </div>
    <div class="card nodst">
        <div class="zone">Yukon (No DST)</div>
        <div id="yk" class="clock"></div>
        <div id="ykd" class="date"></div>
        <div id="ykSun" class="sun"></div>
    </div>
    <div class="card nodst">
        <div class="zone">Nunavut ‚Äì Coral Harbour (No DST)</div>
        <div id="nu" class="clock"></div>
        <div id="nud" class="date"></div>
        <div id="nuSun" class="sun"></div>
    </div>
</div>

<div class="section-label">‚Äî WORLD CLOCK ‚Äî</div>

<div class="grid">
    <div class="card world">
        <div class="zone">World Traveller Clock</div>
        <select id="worldZone">
            <option value="UTC">UTC (Universal)</option>
            <option value="America/New_York">New York (USA)</option>
            <option value="America/Los_Angeles">Los Angeles (USA)</option>
            <option value="Europe/London">London (UK)</option>
            <option value="Europe/Paris">Paris (France)</option>
            <option value="Europe/Rome">Rome (Italy)</option>
            <option value="Europe/Berlin">Berlin (Germany)</option>
            <option value="Europe/Amsterdam">Amsterdam (Netherlands)</option>
            <option value="Europe/Moscow">Moscow (Russia)</option>
            <option value="Africa/Cairo">Cairo (Egypt)</option>
            <option value="Asia/Jerusalem">Jerusalem (Israel)</option>
            <option value="Asia/Dubai">Dubai (UAE)</option>
            <option value="Asia/Karachi">Karachi (Pakistan)</option>
            <option value="Asia/Kolkata">India (IST)</option>
            <option value="Asia/Bangkok">Bangkok (Thailand)</option>
            <option value="Asia/Hong_Kong">Hong Kong (China)</option>
            <option value="Asia/Tokyo">Tokyo (Japan)</option>
            <option value="Australia/Sydney">Sydney (Australia)</option>
            <option value="Pacific/Auckland">Auckland (New Zealand)</option>
        </select>
        <div id="worldClock" class="clock"></div>
        <div id="worldDate" class="date"></div>
        <div id="worldSun" class="sun"></div>
    </div>

    <div class="card timer-card">
        <div class="zone">Stopwatch & Timer</div>

        <div class="section-title">Stopwatch</div>
        <div id="swDisplay" class="sw-display">00:00:00.0</div>
        <div class="btn-row">
            <button id="swStart">Start</button>
            <button id="swStop">Stop</button>
            <button id="swLap">Lap</button>
            <button id="swReset">Reset</button>
        </div>
        <ul id="lapList" class="lap-list"></ul>

        <div class="section-title" style="margin-top:12px;">Countdown Timer</div>
        <div class="timer-inputs">
            <input type="number" id="tHours"   min="0" max="99" placeholder="HH">
            <input type="number" id="tMinutes" min="0" max="59" placeholder="MM">
            <input type="number" id="tSeconds" min="0" max="59" placeholder="SS">
        </div>
        <div id="tDisplay" class="t-display">00:00:00</div>
        <div class="btn-row">
            <button id="tStart">Start</button>
            <button id="tPause">Pause</button>
            <button id="tReset">Reset</button>
        </div>
    </div>
</div>

<footer>
    ¬© 2025 Glen Carruthers ‚Ä¢ All Rights Reserved
    <span class="version">v1.8 PWA ‚Äî GitHub Stable</span>
</footer>

<script>
/* THEME + INSTALL BUTTON */
(function setupThemeAndInstall() {
    const themeToggle = document.getElementById("themeToggle");
    const installBtn  = document.getElementById("installBtn");
    let deferredPrompt = null;

    const savedTheme = localStorage.getItem("multiClockTheme");
    if (savedTheme === "dark") {
        document.body.classList.add("dark");
        themeToggle.textContent = "‚òÄ Light Mode";
    }

    themeToggle.addEventListener("click", () => {
        const isDark = document.body.classList.toggle("dark");
        themeToggle.textContent = isDark ? "‚òÄ Light Mode" : "üåô Dark Mode";
        localStorage.setItem("multiClockTheme", isDark ? "dark" : "light");
    });

    window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;
        installBtn.style.display = "inline-block";
    });

    installBtn.addEventListener("click", async () => {
        if (!deferredPrompt) return;
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === "accepted") {
            deferredPrompt = null;
            installBtn.style.display = "none";
        }
    });
})();

/* SUNRISE / SUNSET (APPROXIMATE) */
function degToRad(d) { return d * Math.PI / 180; }
function radToDeg(r) { return r * 180 / Math.PI; }

function dayOfYear(date) {
    const start = new Date(date.getFullYear(), 0, 0);
    const diff = date - start;
    return Math.floor(diff / 86400000);
}

function calcSunTime(date, lat, lon, tzOffsetHours, isSunrise) {
    const zenith = 90.833;
    const N = dayOfYear(date);
    const lngHour = lon / 15;
    let t = N + ((isSunrise ? 6 : 18) - lngHour) / 24;
    let M = (0.9856 * t) - 3.289;
    let L = M + (1.916 * Math.sin(degToRad(M))) + (0.020 * Math.sin(2 * degToRad(M))) + 282.634;
    L = ((L % 360) + 360) % 360;
    let RA = radToDeg(Math.atan(0.91764 * Math.tan(degToRad(L))));
    RA = ((RA % 360) + 360) % 360;
    const Lquadrant  = Math.floor(L / 90) * 90;
    const RAquadrant = Math.floor(RA / 90) * 90;
    RA = RA + (Lquadrant - RAquadrant);
    RA /= 15;
    const sinDec = 0.39782 * Math.sin(degToRad(L));
    const cosDec = Math.cos(Math.asin(sinDec));
    const cosH = (Math.cos(degToRad(zenith)) - (sinDec * Math.sin(degToRad(lat)))) /
                 (cosDec * Math.cos(degToRad(lat)));
    if (cosH > 1 || cosH < -1) return "N/A";
    let H = isSunrise ? (360 - radToDeg(Math.acos(cosH))) : radToDeg(Math.acos(cosH));
    H /= 15;
    let T = H + RA - (0.06571 * t) - 6.622;
    let UT = T - lngHour;
    UT = ((UT % 24) + 24) % 24;
    let localT = UT + tzOffsetHours;
    localT = ((localT % 24) + 24) % 24;
    const hours = Math.floor(localT);
    const minutes = Math.floor((localT - hours) * 60 + 0.5);
    const hh = String(hours).padStart(2, "0");
    const mm = String(minutes).padStart(2, "0");
    return `${hh}:${mm}`;
}

function getSunriseSunsetStrings(lat, lon, tzOffsetHours) {
    const today = new Date();
    const sunrise = calcSunTime(today, lat, lon, tzOffsetHours, true);
    const sunset  = calcSunTime(today, lat, lon, tzOffsetHours, false);
    return { sunrise, sunset };
}

/* Location configs */
const SUN_LOCS = {
    pt: { lat: 49.2827, lon: -123.1207, offset: -8 },
    mt: { lat: 53.5461, lon: -113.4938, offset: -7 },
    ct: { lat: 49.8951, lon: -97.1384,  offset: -6 },
    et: { lat: 43.6511, lon: -79.3470,  offset: -5 },
    at: { lat: 44.6488, lon: -63.5752,  offset: -4 },
    nt: { lat: 47.5615, lon: -52.7126,  offset: -3.5 },
    sk: { lat: 50.4452, lon: -104.6189, offset: -6 },
    yk: { lat: 60.7212, lon: -135.0568, offset: -7 },
    nu: { lat: 64.1300, lon: -83.1700,  offset: -5 }
};

const WORLD_LOCS = {
    "UTC":                 { lat: 51.5,    lon: 0.0,     offset: 0 },
    "America/New_York":    { lat: 40.7128, lon: -74.0060, offset: -5 },
    "America/Los_Angeles": { lat: 34.0522, lon: -118.2437, offset: -8 },
    "Europe/London":       { lat: 51.5074, lon: -0.1278,  offset: 0 },
    "Europe/Paris":        { lat: 48.8566, lon: 2.3522,   offset: 1 },
    "Europe/Rome":         { lat: 41.9028, lon: 12.4964,  offset: 1 },
    "Europe/Berlin":       { lat: 52.5200, lon: 13.4050,  offset: 1 },
    "Europe/Amsterdam":    { lat: 52.3676, lon: 4.9041,   offset: 1 },
    "Europe/Moscow":       { lat: 55.7558, lon: 37.6173,  offset: 3 },
    "Africa/Cairo":        { lat: 30.0444, lon: 31.2357,  offset: 2 },
    "Asia/Jerusalem":      { lat: 31.7683, lon: 35.2137,  offset: 2 },
    "Asia/Dubai":          { lat: 25.2048, lon: 55.2708,  offset: 4 },
    "Asia/Karachi":        { lat: 24.8607, lon: 67.0011,  offset: 5 },
    "Asia/Kolkata":        { lat: 22.5726, lon: 88.3639,  offset: 5.5 },
    "Asia/Bangkok":        { lat: 13.7563, lon: 100.5018, offset: 7 },
    "Asia/Hong_Kong":      { lat: 22.3193, lon: 114.1694, offset: 8 },
    "Asia/Tokyo":          { lat: 35.6762, lon: 139.6503, offset: 9 },
    "Australia/Sydney":    { lat: -33.8688, lon: 151.2093, offset: 10 },
    "Pacific/Auckland":    { lat: -36.8485, lon: 174.7633, offset: 12 }
};

document.addEventListener("DOMContentLoaded", function() {

    function updateClock(id, zone) {
        document.getElementById(id).textContent =
            new Date().toLocaleTimeString("en-CA", {
                timeZone: zone,
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit"
            });
    }

    function updateDate(id, zone) {
        document.getElementById(id).textContent =
            new Date().toLocaleDateString("en-CA", {
                timeZone: zone,
                weekday: "short",
                year: "numeric",
                month: "2-digit",
                day: "2-digit"
            });
    }

    function updateSun(id, locKey) {
        const loc = SUN_LOCS[locKey];
        if (!loc) return;
        const { sunrise, sunset } = getSunriseSunsetStrings(loc.lat, loc.lon, loc.offset);
        const el = document.getElementById(id);
        if (el) el.textContent = `Sunrise: ${sunrise}  |  Sunset: ${sunset}`;
    }

    function updateWorldSun(zone) {
        const loc = WORLD_LOCS[zone];
        const el = document.getElementById("worldSun");
        if (!el || !loc) {
            if (el) el.textContent = "";
            return;
        }
        const { sunrise, sunset } = getSunriseSunsetStrings(loc.lat, loc.lon, loc.offset);
        el.textContent = `Sunrise: ${sunrise}  |  Sunset: ${sunset}`;
    }

    function updateWorldClock() {
        const zone = document.getElementById("worldZone").value;
        updateClock("worldClock", zone);
        updateDate("worldDate", zone);
        updateWorldSun(zone);
    }

    function updateAllClocks() {
        updateClock("pt", "America/Vancouver");      updateDate("ptd", "America/Vancouver");      updateSun("ptSun", "pt");
        updateClock("mt", "America/Edmonton");       updateDate("mtd", "America/Edmonton");       updateSun("mtSun", "mt");
        updateClock("ct", "America/Winnipeg");       updateDate("ctd", "America/Winnipeg");       updateSun("ctSun", "ct");
        updateClock("et", "America/Toronto");        updateDate("etd", "America/Toronto");        updateSun("etSun", "et");
        updateClock("at", "America/Halifax");        updateDate("atd", "America/Halifax");        updateSun("atSun", "at");
        updateClock("nt", "America/St_Johns");       updateDate("ntd", "America/St_Johns");       updateSun("ntSun", "nt");

        updateClock("sk", "America/Regina");         updateDate("skd", "America/Regina");         updateSun("skSun", "sk");
        updateClock("yk", "America/Whitehorse");     updateDate("ykd", "America/Whitehorse");     updateSun("ykSun", "yk");
        updateClock("nu", "America/Coral_Harbour");  updateDate("nud", "America/Coral_Harbour");  updateSun("nuSun", "nu");

        updateWorldClock();
    }

    document.getElementById("worldZone").addEventListener("change", updateWorldClock);

    updateAllClocks();
    setInterval(updateAllClocks, 1000);

    /* STOPWATCH */
    const swDisplay = document.getElementById("swDisplay");
    const swStartBtn = document.getElementById("swStart");
    const swStopBtn  = document.getElementById("swStop");
    const swLapBtn   = document.getElementById("swLap");
    const swResetBtn = document.getElementById("swReset");
    const lapList    = document.getElementById("lapList");

    let swInterval   = null;
    let swRunning    = false;
    let swStartTime  = 0;
    let swElapsed    = 0;
    let lapCounter   = 0;

    function formatStopwatch(ms) {
        const totalSeconds = Math.floor(ms / 1000);
        const hours   = Math.floor(totalSeconds / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;
        const tenths  = Math.floor((ms % 1000) / 100);
        const hh = String(hours).padStart(2, "0");
        const mm = String(minutes).padStart(2, "0");
        const ss = String(seconds).padStart(2, "0");
        return `${hh}:${mm}:${ss}.${tenths}`;
    }

    function updateStopwatchDisplay() {
        const now = Date.now();
        swElapsed = now - swStartTime;
        swDisplay.textContent = formatStopwatch(swElapsed);
    }

    swStartBtn.addEventListener("click", () => {
        if (!swRunning) {
            swRunning   = true;
            swStartTime = Date.now() - swElapsed;
            swInterval  = setInterval(updateStopwatchDisplay, 100);
        }
    });

    swStopBtn.addEventListener("click", () => {
        if (swRunning) {
            swRunning = false;
            clearInterval(swInterval);
            updateStopwatchDisplay();
        }
    });

    swResetBtn.addEventListener("click", () => {
        swRunning = false;
        clearInterval(swInterval);
        swElapsed = 0;
        swDisplay.textContent = "00:00:00.0";
        lapList.innerHTML = "";
        lapCounter = 0;
    });

    swLapBtn.addEventListener("click", () => {
        if (!swRunning && swElapsed === 0) return;
        lapCounter++;
        const li = document.createElement("li");
        li.textContent = `Lap ${lapCounter}: ${formatStopwatch(swElapsed)}`;
        lapList.insertBefore(li, lapList.firstChild);
    });

    /* TIMER + BEEP */
    const tHours   = document.getElementById("tHours");
    const tMinutes = document.getElementById("tMinutes");
    const tSeconds = document.getElementById("tSeconds");
    const tDisplay = document.getElementById("tDisplay");
    const tStartBtn = document.getElementById("tStart");
    const tPauseBtn = document.getElementById("tPause");
    const tResetBtn = document.getElementById("tReset");

    let timerInterval  = null;
    let timerRemaining = 0;
    let timerRunning   = false;

    let audioCtx = null;
    function playBeep() {
        try {
            if (!audioCtx) {
                const AC = window.AudioContext || window.webkitAudioContext;
                if (!AC) return;
                audioCtx = new AC();
            }
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = "sine";
            osc.frequency.value = 880;
            gain.gain.setValueAtTime(0.001, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.2, audioCtx.currentTime + 0.05);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.5);
            osc.connect(gain).connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        } catch (e) {
            console.warn("Beep failed:", e);
        }
    }

    function formatTimer(ms) {
        const totalSeconds = Math.max(0, Math.floor(ms / 1000));
        const hours   = Math.floor(totalSeconds / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;
        const hh = String(hours).padStart(2, "0");
        const mm = String(minutes).padStart(2, "0");
        const ss = String(seconds).padStart(2, "0");
        return `${hh}:${mm}:${ss}`;
    }

    function updateTimerDisplay() {
        tDisplay.textContent = formatTimer(timerRemaining);
    }

    function tickTimer() {
        timerRemaining -= 1000;
        if (timerRemaining <= 0) {
            timerRemaining = 0;
            updateTimerDisplay();
            clearInterval(timerInterval);
            timerRunning = false;
            playBeep();
            alert("Timer done!");
        } else {
            updateTimerDisplay();
        }
    }

    tStartBtn.addEventListener("click", () => {
        if (!timerRunning) {
            if (timerRemaining <= 0) {
                const h = parseInt(tHours.value   || "0", 10);
                const m = parseInt(tMinutes.value || "0", 10);
                const s = parseInt(tSeconds.value || "0", 10);
                const totalMs = ((h * 3600) + (m * 60) + s) * 1000;
                if (totalMs <= 0) return;
                timerRemaining = totalMs;
            }
            timerRunning = true;
            updateTimerDisplay();
            timerInterval = setInterval(tickTimer, 1000);
        }
    });

    tPauseBtn.addEventListener("click", () => {
        if (timerRunning) {
            timerRunning = false;
            clearInterval(timerInterval);
        }
    });

    tResetBtn.addEventListener("click", () => {
        timerRunning = false;
        clearInterval(timerInterval);
        timerRemaining = 0;
        updateTimerDisplay();
    });

    updateTimerDisplay();
});

/* SERVICE WORKER REGISTRATION */
if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
        navigator.serviceWorker.register("sw.js").catch(err => {
            console.error("SW registration failed:", err);
        });
    });
}
</script>

</body>
</html>
