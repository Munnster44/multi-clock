<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>multi-clock-v1.6-DST-WT-TIMER</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #eef6ff;
        margin: 0;
        padding: 20px;
        text-align: center;
    }
    h1 {
        color: #0055aa;
    }

    /* Grid layout optimized for mobile */
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 20px;
        margin-top: 20px;
        margin-bottom: 40px;
    }

    /* Cards */
    .card {
        background: white;
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .nodst { background:#fff7df; }
    .world { background:#eaffea; }
    .timer-card { background:#ffeefe; }

    .zone {
        font-size: 1.3rem;
        margin-bottom: 8px;
        font-weight: bold;
    }
    .clock {
        font-size: 2rem;
        color: #0055aa;
        font-weight: bold;
        margin-bottom: 6px;
    }
    .date {
        font-size: 1rem;
        color: #333;
    }

    /* World dropdown */
    select {
        padding: 8px;
        font-size: 1rem;
        margin-top: 10px;
        width: 90%;
    }

    footer {
        margin-top: 40px;
        font-size: 1rem;
        color: #333;
        padding: 15px;
    }

    /* Stopwatch + Timer */
    .section-title {
        font-weight: bold;
        margin-top: 5px;
        margin-bottom: 6px;
    }
    .sw-display, .t-display {
        font-size: 1.6rem;
        font-weight: bold;
        margin: 4px 0 8px 0;
        color: #003f7f;
    }
    .btn-row {
        margin-bottom: 8px;
    }
    button {
        padding: 6px 10px;
        margin: 2px;
        font-size: 0.9rem;
        cursor: pointer;
        border-radius: 6px;
        border: 1px solid #ccc;
        background: #f4f4f4;
    }
    button:hover {
        background: #e0e0e0;
    }

    .timer-inputs input {
        width: 3.2em;
        padding: 4px;
        margin: 0 3px;
        text-align: center;
    }
    .lap-list {
        list-style: none;
        padding-left: 0;
        text-align: left;
        max-height: 120px;
        overflow-y: auto;
        margin-top: 6px;
        border-top: 1px solid #ddd;
        font-size: 0.9rem;
    }
    .lap-list li {
        padding: 2px 0;
    }

</style>
</head>
<body>

<h1>multi-clock-v1.6-DST-WT-TIMER<br>Canada & World Timezones + Timer</h1>

<!-- ========================= -->
<!--   ROW 1: CANADA (6)       -->
<!-- ========================= -->
<div class="grid">
    <div class="card"><div class="zone">Pacific Time (PT)</div><div id="pt" class="clock"></div><div id="ptd" class="date"></div></div>
    <div class="card"><div class="zone">Mountain Time (MT)</div><div id="mt" class="clock"></div><div id="mtd" class="date"></div></div>
    <div class="card"><div class="zone">Central Time (CT)</div><div id="ct" class="clock"></div><div id="ctd" class="date"></div></div>
    <div class="card"><div class="zone">Eastern Time (ET)</div><div id="et" class="clock"></div><div id="etd" class="date"></div></div>
    <div class="card"><div class="zone">Atlantic Time (AT)</div><div id="at" class="clock"></div><div id="atd" class="date"></div></div>
    <div class="card"><div class="zone">Newfoundland Time (NT)</div><div id="nt" class="clock"></div><div id="ntd" class="date"></div></div>
</div>

<!-- ========================= -->
<!--   ROW 2: NO-DST (3)       -->
<!-- ========================= -->
<div class="grid">
    <div class="card nodst"><div class="zone">Saskatchewan (No DST)</div><div id="sk" class="clock"></div><div id="skd" class="date"></div></div>
    <div class="card nodst"><div class="zone">Yukon (No DST)</div><div id="yk" class="clock"></div><div id="ykd" class="date"></div></div>
    <div class="card nodst"><div class="zone">Nunavut – Coral Harbour (No DST)</div><div id="nu" class="clock"></div><div id="nud" class="date"></div></div>
</div>

<!-- ========================= -->
<!--   ROW 3: WORLD + TIMER    -->
<!-- ========================= -->
<div class="grid">
    <!-- WORLD -->
    <div class="card world">
        <div class="zone">World Traveller Clock</div>
        <select id="worldZone">
            <option value="UTC">UTC (Universal)</option>
            <option value="America/New_York">New York (USA)</option>
            <option value="America/Los_Angeles">Los Angeles (USA)</option>
            <option value="Europe/London">London (UK)</option>
            <option value="Europe/Paris">Paris (France)</option>
            <option value="Europe/Rome">Rome (Italy)</option>
            <option value="Europe/Berlin">Berlin (Germany)</option>
            <option value="Europe/Amsterdam">Amsterdam (Netherlands)</option>
            <option value="Europe/Moscow">Moscow (Russia)</option>
            <option value="Africa/Cairo">Cairo (Egypt)</option>
            <option value="Asia/Jerusalem">Jerusalem (Israel)</option>
            <option value="Asia/Dubai">Dubai (UAE)</option>
            <option value="Asia/Karachi">Karachi (Pakistan)</option>
            <option value="Asia/Kolkata">India (IST)</option>
            <option value="Asia/Bangkok">Bangkok (Thailand)</option>
            <option value="Asia/Hong_Kong">Hong Kong (China)</option>
            <option value="Asia/Tokyo">Tokyo (Japan)</option>
            <option value="Australia/Sydney">Sydney (Australia)</option>
            <option value="Pacific/Auckland">Auckland (New Zealand)</option>
        </select>
        <div id="worldClock" class="clock"></div>
        <div id="worldDate" class="date"></div>
    </div>

    <!-- TIMER -->
    <div class="card timer-card">
        <div class="zone">Stopwatch & Timer</div>

        <!-- Stopwatch -->
        <div class="section-title">Stopwatch</div>
        <div id="swDisplay" class="sw-display">00:00:00.0</div>
        <div class="btn-row">
            <button id="swStart">Start</button>
            <button id="swStop">Stop</button>
            <button id="swLap">Lap</button>
            <button id="swReset">Reset</button>
        </div>
        <ul id="lapList" class="lap-list"></ul>

        <!-- Countdown Timer -->
        <div class="section-title" style="margin-top:12px;">Countdown Timer</div>
        <div class="timer-inputs">
            <input type="number" id="tHours" min="0" max="99" placeholder="HH">
            <input type="number" id="tMinutes" min="0" max="59" placeholder="MM">
            <input type="number" id="tSeconds" min="0" max="59" placeholder="SS">
        </div>
        <div id="tDisplay" class="t-display">00:00:00</div>
        <div class="btn-row">
            <button id="tStart">Start</button>
            <button id="tPause">Pause</button>
            <button id="tReset">Reset</button>
        </div>
    </div>
</div>

<footer>
    © 2025 Glen Carruthers • All Rights Reserved
</footer>

<script>
/* ===========================================================
   CLOCKS + DATE UPDATES
=========================================================== */

document.addEventListener("DOMContentLoaded", function() {

    function updateClock(id, zone) {
        document.getElementById(id).textContent =
            new Date().toLocaleTimeString("en-CA", {
                timeZone: zone,
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit"
            });
    }

    function updateDate(id, zone) {
        document.getElementById(id).textContent =
            new Date().toLocaleDateString("en-CA", {
                timeZone: zone,
                weekday: "short",
                year: "numeric",
                month: "2-digit",
                day: "2-digit"
            });
    }

    function updateWorldClock() {
        const zone = document.getElementById("worldZone").value;
        updateClock("worldClock", zone);
        updateDate("worldDate", zone);
    }

    function updateAllClocks() {
        updateClock("pt", "America/Vancouver");      updateDate("ptd", "America/Vancouver");
        updateClock("mt", "America/Edmonton");       updateDate("mtd", "America/Edmonton");
        updateClock("ct", "America/Winnipeg");       updateDate("ctd", "America/Winnipeg");
        updateClock("et", "America/Toronto");        updateDate("etd", "America/Toronto");
        updateClock("at", "America/Halifax");        updateDate("atd", "America/Halifax");
        updateClock("nt", "America/St_Johns");       updateDate("ntd", "America/St_Johns");

        updateClock("sk", "America/Regina");         updateDate("skd", "America/Regina");
        updateClock("yk", "America/Whitehorse");     updateDate("ykd", "America/Whitehorse");
        updateClock("nu", "America/Coral_Harbour");  updateDate("nud", "America/Coral_Harbour");

        updateWorldClock();
    }

    document.getElementById("worldZone").addEventListener("change", updateWorldClock);

    updateAllClocks();
    setInterval(updateAllClocks, 1000);

    /* ===========================================================
       STOPWATCH
    =========================================================== */

    const swDisplay = document.getElementById("swDisplay");
    const swStartBtn = document.getElementById("swStart");
    const swStopBtn = document.getElementById("swStop");
    const swLapBtn = document.getElementById("swLap");
    const swResetBtn = document.getElementById("swReset");
    const lapList = document.getElementById("lapList");

    let swInterval = null;
    let swRunning = false;
    let swStartTime = 0;
    let swElapsed = 0;
    let lapCounter = 0;

    function formatStopwatch(ms) {
        const totalSeconds = Math.floor(ms / 1000);
        const hours = Math.floor(totalSeconds / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;
        const tenths = Math.floor((ms % 1000) / 100);

        const hh = String(hours).padStart(2, "0");
        const mm = String(minutes).padStart(2, "0");
        const ss = String(seconds).padStart(2, "0");
        return `${hh}:${mm}:${ss}.${tenths}`;
    }

    function updateStopwatchDisplay() {
        const now = Date.now();
        swElapsed = now - swStartTime;
        swDisplay.textContent = formatStopwatch(swElapsed);
    }

    swStartBtn.addEventListener("click", () => {
        if (!swRunning) {
            swRunning = true;
            swStartTime = Date.now() - swElapsed;
            swInterval = setInterval(updateStopwatchDisplay, 100);
        }
    });

    swStopBtn.addEventListener("click", () => {
        if (swRunning) {
            swRunning = false;
            clearInterval(swInterval);
            updateStopwatchDisplay();
        }
    });

    swResetBtn.addEventListener("click", () => {
        swRunning = false;
        clearInterval(swInterval);
        swElapsed = 0;
        swDisplay.textContent = "00:00:00.0";
        lapList.innerHTML = "";
        lapCounter = 0;
    });

    swLapBtn.addEventListener("click", () => {
        if (!swRunning && swElapsed === 0) return;
        lapCounter++;
        const li = document.createElement("li");
        li.textContent = `Lap ${lapCounter}: ${formatStopwatch(swElapsed)}`;
        lapList.insertBefore(li, lapList.firstChild);
    });

    /* ===========================================================
       COUNTDOWN TIMER
    =========================================================== */

    const tHours = document.getElementById("tHours");
    const tMinutes = document.getElementById("tMinutes");
    const tSeconds = document.getElementById("tSeconds");

    const tDisplay = document.getElementById("tDisplay");
    const tStartBtn = document.getElementById("tStart");
    const tPauseBtn = document.getElementById("tPause");
    const tResetBtn = document.getElementById("tReset");

    let timerInterval = null;
    let timerRemaining = 0;
    let timerRunning = false;

    function formatTimer(ms) {
        const totalSeconds = Math.max(0, Math.floor(ms / 1000));
        const hours = Math.floor(totalSeconds / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;

        const hh = String(hours).padStart(2, "0");
        const mm = String(minutes).padStart(2, "0");
        const ss = String(seconds).padStart(2, "0");
        return `${hh}:${mm}:${ss}`;
    }

    function updateTimerDisplay() {
        tDisplay.textContent = formatTimer(timerRemaining);
    }

    function tickTimer() {
        timerRemaining -= 1000;
        if (timerRemaining <= 0) {
            timerRemaining = 0;
            updateTimerDisplay();
            clearInterval(timerInterval);
            timerRunning = false;
            alert("Timer done!");
        } else {
            updateTimerDisplay();
        }
    }

    tStartBtn.addEventListener("click", () => {
        if (!timerRunning) {
            if (timerRemaining <= 0) {
                const h = parseInt(tHours.value || "0", 10);
                const m = parseInt(tMinutes.value || "0", 10);
                const s = parseInt(tSeconds.value || "0", 10);
                const totalMs = ((h * 3600) + (m * 60) + s) * 1000;
                if (totalMs <= 0) return;
                timerRemaining = totalMs;
            }
            timerRunning = true;
            updateTimerDisplay();
            timerInterval = setInterval(tickTimer, 1000);
        }
    });

    tPauseBtn.addEventListener("click", () => {
        if (timerRunning) {
            timerRunning = false;
            clearInterval(timerInterval);
        }
    });

    tResetBtn.addEventListener("click", () => {
        timerRunning = false;
        clearInterval(timerInterval);
        timerRemaining = 0;
        updateTimerDisplay();
    });

    updateTimerDisplay();
});
</script>

</body>
</html>
